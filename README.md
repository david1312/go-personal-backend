# Semesta Ban API

Idiomatic Way Format Your Code

```shell script
go fmt ./...
```

Run REST Server

```shell script
go run cmd/semesta-ban/*.go rest
```

Running Local Server

```shell script
docker compose up
```

Generate Query or DB Model To Generated Folder

```shell script
docker run --rm -v $(pwd):/src -w /src kjconroy/sqlc generate
```

Running migrations

```shell script
go run cmd/semesta-ban/*.go migrate:up
```

## Directory Structure

- `bootstrap`

  This folder manages dependency.

- `cmd/one-notif`

  The main package.

- `cmd/one-notif/commands`

  For sub-commands of the main package.

- `generated`

  This folder and subfolder is auto generated by sqlc. Queries and model related to database will be in this folder.

- `internal/api`

  For API related handling

- `pkg`

  For any packages that doesn't have dependencies to other packages in this repository (sub-packages are exception).

- `files/db_migrations`

  For database related changes. Table creation/alteration and data insertion/modification goes here.
  Use `golang-migrate`.

- `files/db_queries`

  For database queries. Use `sqlc`.

References:

- https://github.com/kyleconroy/sqlc
- https://github.com/golang-migrate/migrate
